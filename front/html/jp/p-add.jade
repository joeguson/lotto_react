extends ../layout.jade

block css
    link(rel="stylesheet" href="../css/penobrol_add.css" type="text/css")
    script(type="text/javascript" src="/js/jsForAllJade.js")
    script(src="./public/b-youtube/b-youtube-time.js")
    script(src="./public/b-editor/b-editor.js")
    script(src='./js/addPandT.js')

block nav
    include ./pNavUl.jade

block submain
  //.ad Advertisement
  
block main
    article
        p 
            input(type='text' name='title' placeholder='title' maxlength="200" class="title" id="title" required)
        p.infoP
            span(id='titleInfo' class='infoSpan') 200/200
        p
            label
                input(id='rbP' type='radio' value='p' name="public" checked)
                span  public
            label   
                input(id='rbA' type='radio' value='a' name="public")
                span  anonymous
        p 
            input(type='text' name='thumbnail' placeholder='thumbnail' maxlength="200" class="thumbnail" id="thumbnail")  
        p.infoP
            span(id='thumbnailInfo' class='infoSpan') 200/200
        p
            b-editor(id='editor' width="90%" height="600px" name="content")
        // textarea(name='content' class="content" id="content" required)
        p
            input(id='hashtag' type='text' name='hashtag' placeholder='#put #hashtags #like #this' class="hashtag")
        p.infoP
            span(id='hashInfo' class='infoSpan') 20/20
        p
            button(class="submit" name='p' onclick='postArticle(this)') share
    script.
        function checksubmit(){
            if(title.value.length < 5){
                alert('judulnya harus lebih dari 5 alphabet');
                return false;
            }
            if(content.value.length < 5){
                alert('kontennya harus lebih dari 5 alphabet');
                return false;
            }
            return true;
        }
        title.addEventListener('keyup', function(){
            var count = 200;
            count -= title.value.length;
            titleInfo.innerHTML = count + '/200';
            if(count < 1){
                titleInfo.innerHTML = 'exceeds the limit';
            }
        });
        thumbnail.addEventListener('keyup', function(){
            var count = 200;
            count -= thumbnail.value.length;
            thumbnailInfo.innerHTML = count + '/200';
            if(count < 1){
                thumbnailInfo.innerHTML = 'exceeds the limit';
            }
        });
        hashtag.addEventListener('keydown', function(){
            var count = 20;
            count -= (hashtag.value.match(/#/gi) || []).length;
            hashInfo.innerHTML = count + '/20';
            if(count < 1){ // 아직 구현 못함
                hashInfo.innerHTML = 'exceeds the limit';
            }
        });
