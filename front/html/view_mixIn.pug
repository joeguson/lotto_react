mixin hashtag(hashtags)
    if(hashtags.length > 0)
        dd.aHashtag
            - var hashtags = topic.hashtags.map(e => `#${e.hash}`).join(" ");
            a #{hashtags}

mixin basicPInfo(author, date, view, comAnsCount)
    - var basicInfo = 'by '+ author + ' / '+date+' / ' + 'view : ' +view + ' / ' + comAnsCount+ ' comments'
    dd.abasicInfo #{basicInfo}

mixin basicTInfo(author, date, view, comAnsCount)
    - var basicInfo = 'by '+ author + ' / '+date+' / ' + 'view : ' +view + ' / ' + comAnsCount+ ' answers'
    dd.abasicInfo #{basicInfo}

mixin articleContent(content)
    iframe(id="content" class="aContent" style="border: none;")
    script.
        const contentFrame = document.getElementById("content");
        contentFrame.width = "100%";
        const page = contentFrame.contentWindow.document;
        const content = "#{topic.content}".replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&').replace(/&quot;/g, '\"');

        window.addEventListener('DOMContentLoaded', function () {
            autoHeight();
        });

        window.addEventListener('resize', function () {
            autoHeight();
        });

        function autoHeight() {
            contentFrame.height = page.body.scrollHeight + 'px';

            const innerIFrames = Array.from(page.getElementsByTagName('iframe'));
            for (const innerIFrame of innerIFrames) {
                if (!innerIFrame.id.startsWith('embed-')) continue;

                innerIFrame.onload = function () {
                    const content = innerIFrame.contentDocument ? innerIFrame.contentDocument : innerIFrame.contentWindow.document;

                    // height of youtube iframe
                    innerIFrame.height = content.body.scrollHeight + 'px';
                    // height of content iframe
                    contentFrame.height = page.body.scrollHeight + 'px';
                }
            }
        }

        var cssLink = document.createElement("link");
        cssLink.href = "./public/b-editor/__b-editor.css";
        cssLink.rel = "stylesheet";
        cssLink.type = "text/css";
        page.head.appendChild(cssLink);

        var scriptLink = document.createElement("script")
        scriptLink.src = "./public/b-editor/__b-editor.js";
        page.head.appendChild(scriptLink);

        page.body.innerHTML = content;
        const imgTags = page.getElementsByTagName("img");
        for (const t of imgTags) {
            t.onload = () => {
                const i = document.getElementById('content');
                const w = i.contentWindow.document.body.scrollWidth;
                const h = i.contentWindow.document.body.scrollHeight;
                i.height = h;
                i.width = w;
            };
        }

mixin aritcleLikeButton(status)
    if(status)
        button(class="articleLikeButton" type="submit" id="articleLikeButton")
            img(src="icons/nocap.png" class="articleLikeImage" id="likeImage")
    else
        button(class="articleLikeButton" type="submit" id="articleLikeButton")
            img(src="icons/cap.png" class="articleLikeImage" id="likeImage")

mixin reply(type, articleId)
    if(type ==='t')
        a(href='/tandya/'+articleId+'/answer/new' class="pctaInput")
    else
        textarea(name='reply' id="replyInput" class="pctaInput")
        input(type='submit' value='answer' class="pctaInputButton" id="replySubmitButton")

mixin articlePop(type, loginUser, articleAuthor)
    .aPopButton(onclick="aMenuButton()") â‰¡
        .aPopDiv(id='aPopDiv')
            button(class="aPopMenu" id = "articleWarnButton")
                img(src="./icons/warn.png")
            if(loginUser === articleAuthor)
                button(class="aPopMenu" id = "articleDeleteButton")
                    img(src="./icons/trash.png")
                if(type === 'p')
                    a(href='/penobrol/edit/'+topic.id class="aPopMenu")
                        img(src="./icons/edit.png")
                else if(type === 't' )
                    a(href='/tandya/edit/'+topic.id class="aPopMenu")
                        img(src="./icons/edit.png")
                else if(type === 'y')
                    a(href='/youtublog/edit/' + topic.id class="aPopMenu")
                        img(src="./icons/edit.png")